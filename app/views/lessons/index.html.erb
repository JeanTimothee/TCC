<div class="calendar">
  <div class="tuesday">
    <table class="w-100 vh-100">
      <thead>
        <tr>
          <th></th>
          <th>Court 1</th>
          <th>Court 2</th>
          <th>Court 3</th>
          <th>Court 4</th>
          <th>Court 5</th>
        </tr>
      </thead>
      <tbody>
        <tr class="short-lesson">
          <td>9H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 09:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 09:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 09:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 09:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 09:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 09:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 09:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 09:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 09:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 09:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>9H45</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 09:45"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 09:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 09:45"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 09:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 09:45"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 09:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 09:45"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 09:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 09:45"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 09:45"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>10H30</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 10:30"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 10:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 10:30"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 10:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 10:30"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 10:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 10:30"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 10:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 10:30"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 10:30"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>11H15</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 11:15"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 11:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 11:15"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 11:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 11:15"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 11:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 11:15"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 11:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 11:15"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 11:15"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>12H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 12:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 12:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 12:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 12:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 12:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 12:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 12:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 12:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 12:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 12:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>12H45</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 12h45"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 12h45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 12h45"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 12h45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 12h45"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 12h45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 12h45"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 12h45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 12h45"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 12h45"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>13H30</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 13:30"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 13:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 13:30"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 13:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 13:30"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 13:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 13:30"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 13:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 13:30"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 13:30"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>14H15</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 14:15"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 14:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 14:15"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 14:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 14:15"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 14:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 14:15"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 14:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 14:15"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 14:15"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>15H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 15:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 15:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 15:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 15:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 15:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 15:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 15:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 15:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 15:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 15:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>15H45</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 15:45"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 15:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 15:45"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 15:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 15:45"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 15:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 15:45"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 15:45"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 15:45"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 15:45"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>16H30</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 16:30"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 16:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 16:30"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 16:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 16:30"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 16:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 16:30"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 16:30"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 16:30"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 16:30"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="short-lesson">
          <td>17H15</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 17:15"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 17:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 17:15"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 17:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 17:15"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 17:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 17:15"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 17:15"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 17:15"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 17:15"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="long-lesson">
          <td>18H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 18:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 18:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 18:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 18:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 18:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 18:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 18:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 18:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 18:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 18:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="long-lesson">
          <td>19H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 19:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 19:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 19:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 19:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 19:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 19:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 19:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 19:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 19:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 19:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr class="long-lesson">
          <td>20H</td>
          <td>
            <% if Lesson.where({court: 1, start_time: "1996-01-02 20:00"})[0].present? %>
              <%=  Lesson.where({court: 1, start_time: "1996-01-02 20:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 2, start_time: "1996-01-02 20:00"})[0].present? %>
              <%=  Lesson.where({court: 2, start_time: "1996-01-02 20:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 3, start_time: "1996-01-02 20:00"})[0].present? %>
              <%=  Lesson.where({court: 3, start_time: "1996-01-02 20:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 4, start_time: "1996-01-02 20:00"})[0].present? %>
              <%=  Lesson.where({court: 4, start_time: "1996-01-02 20:00"})[0].teacher.nickname %>
            <% end %>
          </td>
          <td>
            <% if Lesson.where({court: 5, start_time: "1996-01-02 20:00"})[0].present? %>
              <%=  Lesson.where({court: 5, start_time: "1996-01-02 20:00"})[0].teacher.nickname %>
            <% end %>
          </td>
        </tr>
        <tr></tr>
      </tbody>
    </table>
  </div>
</div>

<div class="students-list">
<h1>Elèves:</h1>
  <div class="filters d-flex">
    <div class="filter age-filters dropdown">
      <button class="btn filter-btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Age
      </button>
      <div class="dropdown-menu animated fadeIn" aria-labelledby="dropdownMenuButton">
        <% @ages = [] %>
        <% @students.each do |student| %>
          <% @ages << student.age? %>
        <% end %>
        <% @ages.sort.uniq.each do |age| %>
          <%= link_to students_path(request.query_parameters), class: "dropdown-item" do %>
            <%= age %>ans
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="filter level-filters dropdown">
      <button class="btn filter-btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Niveau
      </button>
      <div class="dropdown-menu animated fadeIn" aria-labelledby="dropdownMenuButton">
        <% levels = [] %>
        <% @students.each do |student| %>
          <% levels << student.level? if student.level?.present? %>
        <% end %>
        <% levels.uniq.sort.each do |level| %>
          <%= link_to students_path(request.query_parameters), class: "dropdown-item" do %>
            <%= level %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <%= simple_form_for :search, url: students_path, method: "GET" do |f| %>
    <%= f.input :level, collection: @levels, input_html: { class: "multiple-select", multiple: true } %>
    <%= f.input :age, collection: @ages.sort.uniq, input_html: { multiple: true } %>
    <%= f.submit %>
  <% end %>
  <ul>
    <% @students.each do |student| %>
    <li><%= student.last_name %> <%= student.first_name %> <%= student.age? %>ans <%= student.level? %></li>
    <% end %>
  </ul>
</div>
